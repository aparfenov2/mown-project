<launch>

    <arg name="rviz" default="false" />
    <arg name="loca" default="false" />
    <arg name="teleop" default="false" />
    <arg name="sim" default="false" />
    <arg name="segm" default="false" />
    <arg name="segm_bypass" default="false" />
    <arg name="proj" default="false" />
    <arg name="mb_mod" default="false" />

<!-- sim -->
    <group if="$(arg sim)">
        <include file="$(find tb_gazebo)/launch/turtletown.launch"/>
    </group>

<!-- rviz -->
    <group if="$(arg rviz)">
        <node pkg="rviz" type="rviz" name="rviz"
            args="-d $(find my_utils_common)/rviz/cfg.rviz"/>
    </group>

<!-- teleop -->
    <group if="$(arg teleop)">
        <node pkg="teleop_twist_keyboard" type="teleop_twist_keyboard.py" name="teleop" output="screen">
            <remap from="cmd_vel" to="/mobile_base/commands/velocity"/>
        </node>
    </group>

<!-- segm -->
    <group if="$(arg segm)">
        <include file="$(find segmentation_node)/launch/kobuki.launch">
            <arg name="bypass" value="$(arg segm_bypass)" />
        </include>
    </group>

<!-- loca -->
    <group if="$(arg loca)">
        <include file="$(find aloam_velodyne)/launch/aloam_velodyne_HDL_32.launch">
            <arg name="rviz" value="false" />
        </include>

        <node pkg="tf" type="static_transform_publisher" name="odom_to_camera_init" args="0 0 0 0 0 0 1 odom camera_init 100" />
        <node pkg="tf" type="static_transform_publisher" name="aft_mapped_to_base_footprint" args="0 0 0 0 0 0 1 aft_mapped base_footprint 100" />
    </group>

<!-- proj -->
    <group if="$(arg proj)">
        <include file="$(find projection_node)/launch/segmentation_input.launch"/>
    </group>

<!-- move_base_mod -->
    <group if="$(arg mb_mod)">
        <include file="$(find move_base_mod)/launch/move_base.launch">
            <arg name="cmd_vel_topic" value="/mobile_base/commands/velocity" />
            <arg name="odom_topic" value="odom" />
            <arg name="simple_goal_topic" value="move_base_simple/goal" />
        </include>
    </group>

</launch>
