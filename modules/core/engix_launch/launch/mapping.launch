<launch>
    <arg name="costmap_node" default="true" />
    <arg name="map_server" default="true" />
    <arg name="label_server" default="true" />

    <group if="$(arg costmap_node)">
        <node name="costmap_node" pkg="costmap_2d" type="costmap_2d_node">
            <rosparam file="$(find my_utils_common)/param/global_costmap_params_test.yaml" command="load" ns="costmap" />
            <rosparam file="$(find my_utils_common)/param/global_costmap_params.yaml" command="load" ns="costmap" />
        </node>
    </group>

    <group if="$(arg map_server)">
        <node pkg="mapping" type="map_server" name="mapping"   output="screen">
            <param name="fixed_frame_id" type="str"    value="world" />
            <param name="resolution"     type="double" value="0.1"  />
            <param name="max_range"      type="double" value="40.0"  />
            <param name="hit_logprob"       type="double" value="10"  />
            <param name="miss_logprob"      type="double" value="1"  />
            <param name="max_logprob"       type="double" value="100"  />
            <param name="min_logprob"      type="double" value="0"  />        
            <!-- <param name="lidar" type="str" value="/velodyne_points/new"  />
            <param name="costmap" type="str" value="/costmap_node/costmap/costmap"  />         -->
        </node>
    </group>

    <group if="$(arg label_server)">
        <node pkg="mapping" type="label_server" name="mapping_lab">
            <param name="fixed_frame_id" type="str"    value="world" />
            <param name="resolution"     type="double" value="0.1"  />
            <param name="max_range"      type="double" value="5.0"  />
            <param name="hit_logprob"       type="double" value="10"  />
            <param name="miss_logprob"      type="double" value="1"  />
            <param name="max_logprob"       type="double" value="100"  />
            <param name="min_logprob"      type="double" value="0"  />        
            <param name="rgbPoints" type="str" value="/pcl_proc/points2"  />
            <param name="labelmap" type="str" value="/costmap_node/costmap/labels"  />        
        </node>
    </group>
</launch>
    
